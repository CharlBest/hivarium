<div *ngIf="campaign !== null && campaign !== undefined">
    <mat-card>

        <app-media [src]="campaign.campaign.media"
            mat-card-image></app-media>

        <mat-card-title>{{campaign.campaign.title}}</mat-card-title>
        <mat-card-content>
            <div>{{campaign.campaign.description}}</div>
            <br>
            <div>by
                <strong>{{campaign.owner.username}}</strong>
            </div>
            <br>
            <span>
                <span>
                    <strong>{{campaign.milestonesReached}}</strong> of
                    <strong>{{campaign.milestones.length}}</strong>
                </span>
                <span>milestones</span>
            </span> |
            <span>
                <span>
                    <strong>{{campaign.totalAmountSold}}</strong> of
                    <strong>{{campaign.totalAvailableProducts}}</strong>
                </span>
                <span>sold</span>
            </span> |
            <span>
                <span>
                    <strong>{{campaign.campaign.daysRemaining}}</strong>
                </span>
                <span>days to go</span>
            </span>

            <hr>

            <div style="float: left;">
                Earn from
                <br>
                <img src="assets/hive-coin.svg"
                    style="max-height: 16px;">{{campaign.minimumMilestoneReward}} to
                <img src="assets/hive-coin.svg"
                    style="max-height: 16px;">{{campaign.maximumMilestoneReward}}
                <br> when making a
                <br> purchase
                <br>
                <mat-icon>shopping_cart</mat-icon>
                <br>
                <button mat-raised-button
                    color="accent"
                    (click)="buyNowButton()">Buy now</button>
            </div>
            <div style="float: left;">
                Give and Get from
                <br>
                <img src="assets/hive-coin.svg"
                    style="max-height: 16px;">{{campaign.minimumReferralReward}} to
                <img src="assets/hive-coin.svg"
                    style="max-height: 16px;">{{campaign.maximumReferralReward}}
                <br> when referring a
                <br> friend to make
                <br> a purchase
                <br>
                <mat-icon>person_add</mat-icon>
                <br>
                <button mat-raised-button
                    color="accent"
                    (click)="goToRefferalSection()">Refer a friend</button>
            </div>
            <div style="clear: both;"></div>
        </mat-card-content>
    </mat-card>
    <mat-tab-group [(selectedIndex)]="selectedTab"
        id="app-tab-group">
        <mat-tab>
            <ng-template mat-tab-label>Rewards</ng-template>
            <mat-card>
                <mat-card-content>
                    <h3 style="text-align: center;">Milestone HiveCoin Rewards</h3>
                    <mat-progress-bar [value]="campaign.percentageOfTopMilestoneReached"></mat-progress-bar>
                    <br>
                    <div style="text-align: center;">Value of Sales:
                        <strong>${{campaign.totalValueOfSales}}</strong>
                    </div>
                    <br>

                    <div *ngFor="let milestone of campaign.milestones; let i=index">
                        <div style="float: left;">
                            <img src="assets/hive-coin.svg"
                                style="max-height: 40px;">
                        </div>
                        <div style="float: left;">
                            <h4>Milestone {{i+1}}</h4>
                            <div>Unloacked at: ${{milestone.unlockAtValueOfSales}}</div>
                            <div>
                                Earn
                                <strong>{{milestone.percentageDiscount}}%</strong>
                                of your purchase back in HiveCoins
                            </div>
                        </div>
                        <div style="float: left; font-size: 2rem;">
                            {{milestone.percentageDiscount}}%
                        </div>
                        <div style="clear: both;"></div>
                    </div>
                </mat-card-content>
            </mat-card>
            <mat-card>
                <mat-card-content>
                    <h3 style="text-align: center;">Referral HiveCoin Rewards</h3>
                    <app-referral-rewards [campaign]="campaign"></app-referral-rewards>
                </mat-card-content>
            </mat-card>
        </mat-tab>
        <mat-tab>
            <ng-template mat-tab-label>Buy</ng-template>
            <div class="products-container">
                <mat-card *ngIf="true">
                    <mat-card-content style="text-align: center;">
                        <h4>You've been referred by ***</h4>
                        <div>Referral bonus HiveCoins Reward unlocked</div>
                    </mat-card-content>
                </mat-card>

                <mat-card *ngFor="let product of campaign.products; let i=index"
                    style="max-width: 275px;">

                    <app-media [src]="product.media"
                        *ngIf="product.media"
                        mat-card-image></app-media>

                    <mat-card-content>
                        <div>${{product.cost}} USD |
                            <img src="assets/hive-coin.svg"
                                style="max-height: 16px;">{{product.cost}}</div>
                        <h3>{{product.title}}</h3>
                        <div>{{product.description}}</div>
                        <br>
                        <div>
                            <strong>{{product.sold}}</strong> of
                            <strong>{{product.quantity}}</strong>
                            <br> sold
                        </div>
                        <hr>
                        <h5 style="text-align: center;">HiveCoins Rewards
                            <button mat-icon-button>
                                <mat-icon (click)="openCoinRewardInfoDialog()">info</mat-icon>
                            </button>
                        </h5>
                        <span>
                            <img src="assets/hive-coin.svg"
                                style="max-height: 16px;">{{campaign.productMilestoneReward(product.cost)}} milestone reward</span> |
                        <span>
                            <img src="assets/hive-coin.svg"
                                style="max-height: 16px;">{{campaign.productReferralReward(product.cost)}} referral reward</span> |
                        <span>
                            <img src="assets/hive-coin.svg"
                                style="max-height: 16px;">{{campaign.productMaxMilestoneReward(product.cost)}} max milestone reward</span>
                        <br>
                    </mat-card-content>
                    <mat-card-actions>
                        <button mat-raised-button
                            (click)="goToProduct(product)">Buy this product</button>
                    </mat-card-actions>
                </mat-card>
            </div>
        </mat-tab>
        <mat-tab>
            <ng-template mat-tab-label>Campaign</ng-template>
            <mat-card>
                <mat-card-content [innerHTML]="campaign.campaign.fullDescription"></mat-card-content>
            </mat-card>
        </mat-tab>
    </mat-tab-group>
</div>