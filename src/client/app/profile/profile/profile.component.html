<div *ngIf="!isProcessing && user !== null">
  <md-card>
    <md-card-content>
      <div>{{user.username}}</div>
      <div>{{user.email}}</div>
      <br>
      <div>Email verified:
        <md-icon *ngIf="user.emailVerified">done</md-icon>
        <md-icon *ngIf="!user.emailVerified">close</md-icon>
      </div>
      <div>Signup date: {{user.dateCreated | date}}</div>
      <div>Profile views: {{user.views}}</div>
    </md-card-content>
    <md-card-actions>
      <button md-raised-button
        (click)="openShareDialog()"
        [appTutorial]="tutorialTypeEnum.ProfileShare">Share</button>
      <button md-raised-button
        (click)="openReportDialog()"
        [appTutorial]="tutorialTypeEnum.ProfileReport">Report</button>
      <button md-raised-button
        (click)="resendEmailVerificationLink()">Resend email verification link</button>
      <button md-raised-button
        (click)="profileTour()">Profile tour</button>
      <button md-raised-button
        color="warn"
        (click)="openDeleteAccountDialog()"
        [appTutorial]="tutorialTypeEnum.DeleteUser"
        tutorialBackgroundColor="none">Delete account</button>
    </md-card-actions>
  </md-card>

  <md-card [appTutorial]="tutorialTypeEnum.AvatarUpload">
    <md-card-content>
      <h3>Avatar</h3>
      <button md-raised-button
        color="warn"
        (click)="removeAvatar()"
        *ngIf="user?.avatarUrl?.length > 0">Remove avatar</button>
      <app-upload-button (onUploadComplete)="updateAvatar($event)"
        [showPreview]="false"></app-upload-button>
      <img md-card-image
        [src]="user.avatarUrl"
        *ngIf="user.avatarUrl"
        alt="avatar"
        class="avatar">
    </md-card-content>
  </md-card>

  <app-update-bio [content]="user.bio"></app-update-bio>

  <app-update-password></app-update-password>

  <md-card *ngIf="!isProcessing && user === null">
    <md-card-content>
      An error occurred
    </md-card-content>
  </md-card>

  <md-card *ngIf="isProcessing">
    <md-card-content>
      <md-spinner class="preloader"></md-spinner>
    </md-card-content>
  </md-card>